-- Deploy underground:004-SCAN to pg

DO $$
BEGIN
    CREATE TABLE IF NOT EXISTS CIRCLE.SERIES (
        id BIGSERIAL PRIMARY KEY,
        time_l integer,
        time_utc timestamp with time zone,
        company_id int REFERENCES CIRCLE.COMPANY(id),
        resolution circle.resolution_enum,
        o NUMERIC(9,4),
        h NUMERIC(9,4),
        l NUMERIC(9,4),
        c NUMERIC(9,4),
        v NUMERIC(9,4),
        vs NUMERIC(9,4),
        o_ha NUMERIC(9,4),
        h_ha NUMERIC(9,4),
        l_ha NUMERIC(9,4),
        c_ha NUMERIC(9,4),
        sma_5 NUMERIC(20,15),
        sma_10 NUMERIC(20,15),
        sma_20 NUMERIC(20,15),
        sma_50 NUMERIC(20,15),
        sma_100 NUMERIC(20,15),
        sma_200 NUMERIC(20,15),
        ema_20 NUMERIC(20,15),
        ema_25 NUMERIC(20,15),
        ema_30 NUMERIC(20,15),
        ema_35 NUMERIC(20,15),
        ema_40 NUMERIC(20,15),
        ema_45 NUMERIC(20,15),
        ema_50 NUMERIC(20,15),
        ema_55 NUMERIC(20,15),
        ema_std NUMERIC(20,15),
        vwap NUMERIC(20,15),
        rvol NUMERIC(20,15),
        tp NUMERIC(20,15),
        pv NUMERIC(20,15),
        pvs NUMERIC(20,15),
        pv_buy NUMERIC(20,15),
        pv_sell NUMERIC(20,15),
        pv_buy_pct NUMERIC(20,15),
        pv_color varchar(20),
        pv_mm int,
        vwap_mm int,
        ema_mm int,
        h_s NUMERIC(20,15),
        l_s NUMERIC(20,15),
        h_p NUMERIC(20,15),
        l_p NUMERIC(20,15)
    );
END $$;
